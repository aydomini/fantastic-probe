# Fantastic-Probe 日志轮转配置
# 路径: /etc/logrotate.d/fantastic-probe

/var/log/fantastic_probe.log
/var/log/fantastic_probe_errors.log
{
    # 日志大小达到 1MB 时轮转
    size 1M

    # 保留最近 1 个轮转文件（约 2MB 总空间）
    rotate 1

    # 压缩旧日志文件
    compress

    # 延迟压缩（第二次轮转时才压缩）
    delaycompress

    # 日志文件不存在不报错
    missingok

    # 不轮转空日志文件
    notifempty

    # 轮转后创建新文件
    create 644 root root

    # 使用日期作为后缀
    dateext
    dateformat -%Y%m%d-%s

    # 轮转后执行的命令（可选：通知服务重新打开日志）
    postrotate
        # 发送 HUP 信号通知服务刷新日志（如果需要）
        # systemctl reload fantastic-probe-monitor.service 2>/dev/null || true
    endscript
}
